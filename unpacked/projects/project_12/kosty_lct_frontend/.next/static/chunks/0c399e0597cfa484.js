(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46257,e=>{"use strict";e.s(["default",()=>eM],46257);var t=e.i(11471),r=e.i(27790),n=e.i(64361),l=e.i(29650),a=e.i(31485);let o=()=>(0,a.useWebSocketStore)(e=>e.lastAIMessage),i=()=>(0,a.useWebSocketStore)(e=>e.aiStatus);(0,n.create)()((0,l.devtools)(e=>({loading:!1,error:null,setLoading:t=>e({loading:t}),setError:t=>e({error:t}),clearError:()=>e({error:null})}),{name:"main-store"}));var s=e.i(18157),c=e.i(37503),d=e.i(78931);e.i(82873),e.i(141),e.i(29272),e.i(30235),e.i(2628);var u=e.i(32070);function m(e){let{title:r,data:n,series:l,yLabel:a,height:o=300,scrollable:i,pixelsPerSecond:s}=e;return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:r}),(0,t.jsx)(u.RealtimeUPlot,{data:n,series:l,yLabel:a,height:o,scrollable:i,pixelsPerSecond:s})]})}var h=e.i(5291);function f(e){var t,r;if(!e.length)return[[],[]];let n=null!=(r=null==(t=e[0])?void 0:t.time_sec)?r:0;return[e.map(e=>e.time_sec-n),e.map(e=>e.value)]}function p(){let[e,n]=(0,r.useState)("window");(0,c.useBPMWebSocket)(),(0,c.useUCWebSocket)();let l=(0,a.useWebSocketStore)(e=>e.bpmData),o=(0,a.useWebSocketStore)(e=>e.ucData),i=(0,d.useSlidingWindow)(l,{windowSize:100,maxPoints:250}),s=(0,d.useSlidingWindow)(o,{windowSize:100,maxPoints:250}),{chartData:u,dataCount:p,updateTime:v}=i,{chartData:x,dataCount:g,updateTime:w}=s,b=(0,r.useMemo)(()=>f(l),[l]),y=(0,r.useMemo)(()=>f(o),[o]);"window"===e||l.length,"window"===e||o.length;let j="scroll"===e;return(0,r.useEffect)(()=>{if("window"!==e)return;let t=setInterval(()=>{v(),w()},1e3);return()=>clearInterval(t)},[e,v,w]),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Режим отображения"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(h.Button,{size:"sm",variant:"window"===e?"default":"outline",onClick:()=>n("window"),children:"Скользящее окно"}),(0,t.jsx)(h.Button,{size:"sm",variant:"scroll"===e?"default":"outline",onClick:()=>n("scroll"),children:"Горизонтальный скролл"})]})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsx)(m,{title:"Heart Rate (BPM)",data:"window"===e?u:b,series:[{label:"BPM",color:"rgb(59, 130, 246)"}],yLabel:"сек / BPM",scrollable:j,pixelsPerSecond:j?6:void 0}),(0,t.jsx)(m,{title:"Uterine Contractions (UC)",data:"window"===e?x:y,series:[{label:"UC",color:"rgb(16, 185, 129)"}],yLabel:"сек / UC",scrollable:j,pixelsPerSecond:j?6:void 0})]})]})}var v=e.i(52541),x=e.i(40906),g=e.i(84150),w="Progress",[b,y]=(0,x.createContextScope)(w),[j,S]=b(w),N=r.forwardRef((e,r)=>{var n,l,a,o;let{__scopeProgress:i,value:s=null,max:c,getValueLabel:d=R,...u}=e;(c||0===c)&&!P(c)&&console.error((n="".concat(c),l="Progress","Invalid prop `max` of value `".concat(n,"` supplied to `").concat(l,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let m=P(c)?c:100;null===s||k(s,m)||console.error((a="".concat(s),o="Progress","Invalid prop `value` of value `".concat(a,"` supplied to `").concat(o,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let h=k(s,m)?s:null,f=_(h)?d(h,m):void 0;return(0,t.jsx)(j,{scope:i,value:h,max:m,children:(0,t.jsx)(g.Primitive.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":_(h)?h:void 0,"aria-valuetext":f,role:"progressbar","data-state":T(h,m),"data-value":null!=h?h:void 0,"data-max":m,...u,ref:r})})});N.displayName=w;var C="ProgressIndicator",E=r.forwardRef((e,r)=>{var n;let{__scopeProgress:l,...a}=e,o=S(C,l);return(0,t.jsx)(g.Primitive.div,{"data-state":T(o.value,o.max),"data-value":null!=(n=o.value)?n:void 0,"data-max":o.max,...a,ref:r})});function R(e,t){return"".concat(Math.round(e/t*100),"%")}function T(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function _(e){return"number"==typeof e}function P(e){return _(e)&&!isNaN(e)&&e>0}function k(e,t){return _(e)&&!isNaN(e)&&e<=t&&e>=0}function L(e){let{className:r,indicatorClassName:n,value:l,...a}=e;return(0,t.jsx)(N,{"data-slot":"progress",className:(0,s.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",r),...a,children:(0,t.jsx)(E,{"data-slot":"progress-indicator",className:(0,s.cn)("bg-primary h-full w-full flex-1 transition-all",n),style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})}E.displayName=C;var D=e.i(39718),A=e.i(76699),M=e.i(87370),H=r.createContext(void 0),W=e.i(99243),z=e.i(70435),I="ScrollArea",[B,F]=(0,x.createContextScope)(I),[U,O]=B(I),X=r.forwardRef((e,n)=>{let{__scopeScrollArea:l,type:a="hover",dir:o,scrollHideDelay:i=600,...s}=e,[c,d]=r.useState(null),[u,m]=r.useState(null),[h,f]=r.useState(null),[p,v]=r.useState(null),[x,w]=r.useState(null),[b,y]=r.useState(0),[j,S]=r.useState(0),[N,C]=r.useState(!1),[E,R]=r.useState(!1),T=(0,A.useComposedRefs)(n,e=>d(e)),_=function(e){let t=r.useContext(H);return e||t||"ltr"}(o);return(0,t.jsx)(U,{scope:l,type:a,dir:_,scrollHideDelay:i,scrollArea:c,viewport:u,onViewportChange:m,content:h,onContentChange:f,scrollbarX:p,onScrollbarXChange:v,scrollbarXEnabled:N,onScrollbarXEnabledChange:C,scrollbarY:x,onScrollbarYChange:w,scrollbarYEnabled:E,onScrollbarYEnabledChange:R,onCornerWidthChange:y,onCornerHeightChange:S,children:(0,t.jsx)(g.Primitive.div,{dir:_,...s,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":j+"px",...e.style}})})});X.displayName=I;var Y="ScrollAreaViewport",V=r.forwardRef((e,n)=>{let{__scopeScrollArea:l,children:a,nonce:o,...i}=e,s=O(Y,l),c=r.useRef(null),d=(0,A.useComposedRefs)(n,c,s.onViewportChange);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),(0,t.jsx)(g.Primitive.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,t.jsx)("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});V.displayName=Y;var q="ScrollAreaScrollbar",K=r.forwardRef((e,n)=>{let{forceMount:l,...a}=e,o=O(q,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:s}=o,c="horizontal"===e.orientation;return r.useEffect(()=>(c?i(!0):s(!0),()=>{c?i(!1):s(!1)}),[c,i,s]),"hover"===o.type?(0,t.jsx)(G,{...a,ref:n,forceMount:l}):"scroll"===o.type?(0,t.jsx)(J,{...a,ref:n,forceMount:l}):"auto"===o.type?(0,t.jsx)(Q,{...a,ref:n,forceMount:l}):"always"===o.type?(0,t.jsx)(Z,{...a,ref:n}):null});K.displayName=q;var G=r.forwardRef((e,n)=>{let{forceMount:l,...a}=e,o=O(q,e.__scopeScrollArea),[i,s]=r.useState(!1);return r.useEffect(()=>{let e=o.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),s(!0)},n=()=>{t=window.setTimeout(()=>s(!1),o.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",n),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",n)}}},[o.scrollArea,o.scrollHideDelay]),(0,t.jsx)(D.Presence,{present:l||i,children:(0,t.jsx)(Q,{"data-state":i?"visible":"hidden",...a,ref:n})})}),J=r.forwardRef((e,n)=>{var l;let{forceMount:a,...o}=e,i=O(q,e.__scopeScrollArea),s="horizontal"===e.orientation,c=ev(()=>u("SCROLL_END"),100),[d,u]=(l={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},r.useReducer((e,t)=>{let r=l[e][t];return null!=r?r:e},"hidden"));return r.useEffect(()=>{if("idle"===d){let e=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,i.scrollHideDelay,u]),r.useEffect(()=>{let e=i.viewport,t=s?"scrollLeft":"scrollTop";if(e){let r=e[t],n=()=>{let n=e[t];r!==n&&(u("SCROLL"),c()),r=n};return e.addEventListener("scroll",n),()=>e.removeEventListener("scroll",n)}},[i.viewport,s,u,c]),(0,t.jsx)(D.Presence,{present:a||"hidden"!==d,children:(0,t.jsx)(Z,{"data-state":"hidden"===d?"hidden":"visible",...o,ref:n,onPointerEnter:(0,z.composeEventHandlers)(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:(0,z.composeEventHandlers)(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),Q=r.forwardRef((e,n)=>{let l=O(q,e.__scopeScrollArea),{forceMount:a,...o}=e,[i,s]=r.useState(!1),c="horizontal"===e.orientation,d=ev(()=>{if(l.viewport){let e=l.viewport.offsetWidth<l.viewport.scrollWidth,t=l.viewport.offsetHeight<l.viewport.scrollHeight;s(c?e:t)}},10);return ex(l.viewport,d),ex(l.content,d),(0,t.jsx)(D.Presence,{present:a||i,children:(0,t.jsx)(Z,{"data-state":i?"visible":"hidden",...o,ref:n})})}),Z=r.forwardRef((e,n)=>{let{orientation:l="vertical",...a}=e,o=O(q,e.__scopeScrollArea),i=r.useRef(null),s=r.useRef(0),[c,d]=r.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=eu(c.viewport,c.content),m={...a,sizes:c,onSizesChange:d,hasThumb:!!(u>0&&u<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:e=>s.current=e};function h(e,t){return function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ltr",l=em(r),a=t||l/2,o=r.scrollbar.paddingStart+a,i=r.scrollbar.size-r.scrollbar.paddingEnd-(l-a),s=r.content-r.viewport;return ef([o,i],"ltr"===n?[0,s]:[-1*s,0])(e)}(e,s.current,c,t)}return"horizontal"===l?(0,t.jsx)($,{...m,ref:n,onThumbPositionChange:()=>{if(o.viewport&&i.current){let e=eh(o.viewport.scrollLeft,c,o.dir);i.current.style.transform="translate3d(".concat(e,"px, 0, 0)")}},onWheelScroll:e=>{o.viewport&&(o.viewport.scrollLeft=e)},onDragScroll:e=>{o.viewport&&(o.viewport.scrollLeft=h(e,o.dir))}}):"vertical"===l?(0,t.jsx)(ee,{...m,ref:n,onThumbPositionChange:()=>{if(o.viewport&&i.current){let e=eh(o.viewport.scrollTop,c);i.current.style.transform="translate3d(0, ".concat(e,"px, 0)")}},onWheelScroll:e=>{o.viewport&&(o.viewport.scrollTop=e)},onDragScroll:e=>{o.viewport&&(o.viewport.scrollTop=h(e))}}):null}),$=r.forwardRef((e,n)=>{let{sizes:l,onSizesChange:a,...o}=e,i=O(q,e.__scopeScrollArea),[s,c]=r.useState(),d=r.useRef(null),u=(0,A.useComposedRefs)(n,d,i.onScrollbarXChange);return r.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,t.jsx)(en,{"data-orientation":"horizontal",...o,ref:u,sizes:l,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":em(l)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(i.viewport){let n=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(n),function(e,t){return e>0&&e<t}(n,r)&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&s&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:ed(s.paddingLeft),paddingEnd:ed(s.paddingRight)}})}})}),ee=r.forwardRef((e,n)=>{let{sizes:l,onSizesChange:a,...o}=e,i=O(q,e.__scopeScrollArea),[s,c]=r.useState(),d=r.useRef(null),u=(0,A.useComposedRefs)(n,d,i.onScrollbarYChange);return r.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,t.jsx)(en,{"data-orientation":"vertical",...o,ref:u,sizes:l,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":em(l)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(i.viewport){let n=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(n),function(e,t){return e>0&&e<t}(n,r)&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&s&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:ed(s.paddingTop),paddingEnd:ed(s.paddingBottom)}})}})}),[et,er]=B(q),en=r.forwardRef((e,n)=>{let{__scopeScrollArea:l,sizes:a,hasThumb:o,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:m,onResize:h,...f}=e,p=O(q,l),[v,x]=r.useState(null),w=(0,A.useComposedRefs)(n,e=>x(e)),b=r.useRef(null),y=r.useRef(""),j=p.viewport,S=a.content-a.viewport,N=(0,M.useCallbackRef)(m),C=(0,M.useCallbackRef)(d),E=ev(h,10);function R(e){b.current&&u({x:e.clientX-b.current.left,y:e.clientY-b.current.top})}return r.useEffect(()=>{let e=e=>{let t=e.target;(null==v?void 0:v.contains(t))&&N(e,S)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[j,v,S,N]),r.useEffect(C,[a,C]),ex(v,E),ex(p.content,E),(0,t.jsx)(et,{scope:l,scrollbar:v,hasThumb:o,onThumbChange:(0,M.useCallbackRef)(i),onThumbPointerUp:(0,M.useCallbackRef)(s),onThumbPositionChange:C,onThumbPointerDown:(0,M.useCallbackRef)(c),children:(0,t.jsx)(g.Primitive.div,{...f,ref:w,style:{position:"absolute",...f.style},onPointerDown:(0,z.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),b.current=v.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),R(e))}),onPointerMove:(0,z.composeEventHandlers)(e.onPointerMove,R),onPointerUp:(0,z.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=y.current,p.viewport&&(p.viewport.style.scrollBehavior=""),b.current=null})})})}),el="ScrollAreaThumb",ea=r.forwardRef((e,r)=>{let{forceMount:n,...l}=e,a=er(el,e.__scopeScrollArea);return(0,t.jsx)(D.Presence,{present:n||a.hasThumb,children:(0,t.jsx)(eo,{ref:r,...l})})}),eo=r.forwardRef((e,n)=>{let{__scopeScrollArea:l,style:a,...o}=e,i=O(el,l),s=er(el,l),{onThumbPositionChange:c}=s,d=(0,A.useComposedRefs)(n,e=>s.onThumbChange(e)),u=r.useRef(void 0),m=ev(()=>{u.current&&(u.current(),u.current=void 0)},100);return r.useEffect(()=>{let e=i.viewport;if(e){let t=()=>{m(),u.current||(u.current=ep(e,c),c())};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,m,c]),(0,t.jsx)(g.Primitive.div,{"data-state":s.hasThumb?"visible":"hidden",...o,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:(0,z.composeEventHandlers)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top;s.onThumbPointerDown({x:r,y:n})}),onPointerUp:(0,z.composeEventHandlers)(e.onPointerUp,s.onThumbPointerUp)})});ea.displayName=el;var ei="ScrollAreaCorner",es=r.forwardRef((e,r)=>{let n=O(ei,e.__scopeScrollArea),l=!!(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&l?(0,t.jsx)(ec,{...e,ref:r}):null});es.displayName=ei;var ec=r.forwardRef((e,n)=>{let{__scopeScrollArea:l,...a}=e,o=O(ei,l),[i,s]=r.useState(0),[c,d]=r.useState(0),u=!!(i&&c);return ex(o.scrollbarX,()=>{var e;let t=(null==(e=o.scrollbarX)?void 0:e.offsetHeight)||0;o.onCornerHeightChange(t),d(t)}),ex(o.scrollbarY,()=>{var e;let t=(null==(e=o.scrollbarY)?void 0:e.offsetWidth)||0;o.onCornerWidthChange(t),s(t)}),u?(0,t.jsx)(g.Primitive.div,{...a,ref:n,style:{width:i,height:c,position:"absolute",right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:0,...e.style}}):null});function ed(e){return e?parseInt(e,10):0}function eu(e,t){let r=e/t;return isNaN(r)?0:r}function em(e){let t=eu(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function eh(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ltr",n=em(t),l=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-l,o=t.content-t.viewport,i=function(e,t){let[r,n]=t;return Math.min(n,Math.max(r,e))}(e,"ltr"===r?[0,o]:[-1*o,0]);return ef([0,o],[0,a-n])(i)}function ef(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}var ep=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},r={left:e.scrollLeft,top:e.scrollTop},n=0;return!function l(){let a={left:e.scrollLeft,top:e.scrollTop},o=r.left!==a.left,i=r.top!==a.top;(o||i)&&t(),r=a,n=window.requestAnimationFrame(l)}(),()=>window.cancelAnimationFrame(n)};function ev(e,t){let n=(0,M.useCallbackRef)(e),l=r.useRef(0);return r.useEffect(()=>()=>window.clearTimeout(l.current),[]),r.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(n,t)},[n,t])}function ex(e,t){let r=(0,M.useCallbackRef)(t);(0,W.useLayoutEffect)(()=>{let t=0;if(e){let n=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(t),n.unobserve(e)}}},[e,r])}function eg(e){let{className:r,children:n,...l}=e;return(0,t.jsxs)(X,{"data-slot":"scroll-area",className:(0,s.cn)("relative",r),...l,children:[(0,t.jsx)(V,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:n}),(0,t.jsx)(ew,{}),(0,t.jsx)(es,{})]})}function ew(e){let{className:r,orientation:n="vertical",...l}=e;return(0,t.jsx)(K,{"data-slot":"scroll-area-scrollbar",orientation:n,className:(0,s.cn)("flex touch-none p-px transition-colors select-none","vertical"===n&&"h-full w-2.5 border-l border-l-transparent","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent",r),...l,children:(0,t.jsx)(ea,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var eb=e.i(12503);function ey(e){let{status:r}=e;return(0,t.jsx)(eb.Badge,{variant:"outline",className:"connected"===r?"border-slate-400 text-muted-foreground":"connecting"===r?"border-dashed border-slate-400 text-muted-foreground":"error"===r?"border-slate-700 text-slate-700":"border-slate-300 text-muted-foreground",children:r})}function ej(e){let{status:r}=e,n="Тревога"===r?"bg-slate-700":"Подозрение"===r?"bg-slate-500":"bg-slate-300";return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"inline-block h-2.5 w-2.5 rounded-full ".concat(n)}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Краткосрочный статус:"}),(0,t.jsx)("span",{className:"font-medium text-sm",children:r})]})}var eS=e.i(25485);function eN(e){let{events:r}=e;if(!r||0===r.length)return(0,t.jsx)("div",{className:"h-32 rounded border flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Нет событий"})});let n=[...r].sort((e,t)=>t.severity-e.severity);return(0,t.jsx)(eg,{className:"h-32 rounded border",children:(0,t.jsx)("div",{className:"p-3 space-y-3",children:n.map((e,r)=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eb.Badge,{variant:"outline",className:"text-xs uppercase tracking-wide text-muted-foreground",children:e.type}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["severity: ",e.severity.toFixed(2)]})]})}),(0,t.jsx)(L,{className:"bg-muted/40",indicatorClassName:"bg-slate-500",value:Math.max(0,Math.min(100,100*e.severity))}),r<n.length-1&&(0,t.jsx)(eS.Separator,{})]},"".concat(e.type,"-").concat(r)))})})}function eC(){var e;(0,c.useAIWebSocket)();let r=o(),n=i();return(0,t.jsxs)(v.Card,{className:"w-full h-full flex flex-col",children:[(0,t.jsx)(v.CardHeader,{className:"flex-shrink-0",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(v.CardTitle,{children:"AI Analysis"}),(0,t.jsx)(v.CardDescription,{children:"Статус и вероятности"})]}),(0,t.jsx)(ey,{status:n})]})}),(0,t.jsx)(v.CardContent,{className:"flex-1 overflow-hidden p-6 pt-0",children:(0,t.jsx)(eg,{className:"h-full",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(null==r?void 0:r.short_term.status)&&(0,t.jsx)(ej,{status:r.short_term.status}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:"События"}),(0,t.jsx)(eN,{events:null!=(e=null==r?void 0:r.short_term.events)?e:[]})]}),(0,t.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Hypoxia 60"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:r?"".concat((100*r.long_term.hypoxia_60).toFixed(1),"%"):"—"})]}),(0,t.jsx)(L,{className:"bg-muted/40",indicatorClassName:"bg-slate-500",value:r?Math.max(0,Math.min(100,100*r.long_term.hypoxia_60)):0})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Emergency 30"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:r?"".concat((100*r.long_term.emergency_30).toFixed(1),"%"):"—"})]}),(0,t.jsx)(L,{className:"bg-muted/40",indicatorClassName:"bg-slate-500",value:r?Math.max(0,Math.min(100,100*r.long_term.emergency_30)):0})]})]})]})})})]})}var eE=e.i(15863);let eR=(0,eE.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),eT=(0,eE.default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),e_=(0,eE.default)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),eP=(0,eE.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var ek=e.i(89354),ek=ek;let eL={error:{icon:eR,label:"Критично",accent:"border-l-slate-500"},warning:{icon:eR,label:"Важно",accent:"border-l-slate-400"},info:{icon:eP,label:"Информация",accent:"border-l-slate-300"},success:{icon:e_,label:"Событие",accent:"border-l-slate-300"}};function eD(){let e=function(){let e=o(),t=i(),[n,l]=(0,r.useState)([]),a=(0,r.useRef)(new Map),s=(0,r.useRef)(null),c=(0,r.useRef)(null),d=(0,r.useCallback)(e=>{if(!e.length)return;let t=new Map(a.current),r=!1;if(e.forEach(e=>{let n=t.get(e.id);n&&n.timestamp.getTime()===e.timestamp.getTime()||(t.set(e.id,e),r=!0)}),!r)return;let n=Array.from(t.values()).sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()).slice(0,100);a.current=new Map(n.map(e=>[e.id,e])),l(n)},[]);return(0,r.useEffect)(()=>{if(!t||s.current===t)return;let e=function(e){let t={timestamp:new Date,acknowledged:"error"!==e};switch(e){case"connected":return{id:"connection-".concat(e,"-").concat(t.timestamp.getTime()),type:"info",title:"AI подключен",message:"Система анализа данных активна",...t};case"connecting":return{id:"connection-".concat(e,"-").concat(t.timestamp.getTime()),type:"info",title:"Подключение к AI",message:"Устанавливаем соединение с системой анализа",...t};case"error":return{id:"connection-".concat(e,"-").concat(t.timestamp.getTime()),type:"error",title:"Ошибка подключения AI",message:"Не удается подключиться к системе анализа",...t,acknowledged:!1};default:return{id:"connection-".concat(e,"-").concat(t.timestamp.getTime()),type:"info",title:"Соединение разорвано",message:"Ожидаем новое подключение к системе анализа",...t}}}(t);s.current=t,e&&d([e])},[t,d]),(0,r.useEffect)(()=>{if(!e)return;let t=[e.time,e.short_term.status,e.short_term.events.map(e=>"".concat(e.type,":").concat(e.severity.toFixed(2))).join("|"),e.long_term.hypoxia_60.toFixed(2),e.long_term.emergency_30.toFixed(2)].join("-");c.current!==t&&(c.current=t,d(function(e){let t=[],r=new Date(1e3*e.time),n=e.short_term.status;return"Тревога"===n?t.push({id:"status-alert-".concat(e.time),type:"error",title:"Критический статус",message:"Обнаружена тревога в анализе данных",timestamp:r,acknowledged:!1}):"Подозрение"===n&&t.push({id:"status-warning-".concat(e.time),type:"warning",title:"Подозрительная активность",message:"Требуется внимание: ".concat(n),timestamp:r,acknowledged:!1}),e.short_term.events.forEach((n,l)=>{n.severity>.7?t.push({id:"event-high-".concat(e.time,"-").concat(l),type:"error",title:"Высокий риск события",message:"".concat(n.type,": уровень ").concat(n.severity.toFixed(2)),timestamp:r,acknowledged:!1,severity:n.severity}):n.severity>.4&&t.push({id:"event-medium-".concat(e.time,"-").concat(l),type:"warning",title:"Повышенное внимание к событию",message:"".concat(n.type,": уровень ").concat(n.severity.toFixed(2)),timestamp:r,acknowledged:!1,severity:n.severity})}),e.long_term.hypoxia_60>.8?t.push({id:"hypoxia-high-".concat(e.time),type:"error",title:"Высокий риск гипоксии",message:"Вероятность гипоксии 60 мин: ".concat((100*e.long_term.hypoxia_60).toFixed(1),"%"),timestamp:r,acknowledged:!1}):e.long_term.hypoxia_60>.6&&t.push({id:"hypoxia-medium-".concat(e.time),type:"warning",title:"Повышенный риск гипоксии",message:"Вероятность гипоксии 60 мин: ".concat((100*e.long_term.hypoxia_60).toFixed(1),"%"),timestamp:r,acknowledged:!1}),e.long_term.emergency_30>.7?t.push({id:"emergency-high-".concat(e.time),type:"error",title:"Высокий риск экстренной ситуации",message:"Вероятность экстренной ситуации 30 мин: ".concat((100*e.long_term.emergency_30).toFixed(1),"%"),timestamp:r,acknowledged:!1}):e.long_term.emergency_30>.5&&t.push({id:"emergency-medium-".concat(e.time),type:"warning",title:"Повышенный риск экстренной ситуации",message:"Вероятность экстренной ситуации 30 мин: ".concat((100*e.long_term.emergency_30).toFixed(1),"%"),timestamp:r,acknowledged:!1}),t}(e)))},[e,d]),n}(),[n,l]=(0,r.useState)(new Set),a=e.filter(e=>!n.has(e.id));return(0,t.jsxs)(v.Card,{className:"w-full h-full flex flex-col",children:[(0,t.jsx)(v.CardHeader,{className:"flex-shrink-0",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(v.CardTitle,{children:"Предупреждения"}),(0,t.jsx)(v.CardDescription,{children:"Системные уведомления и события"})]}),(0,t.jsxs)(eb.Badge,{variant:"outline",className:"border-muted-foreground/30 text-muted-foreground",children:[a.length," активных"]})]})}),(0,t.jsx)(v.CardContent,{className:"flex-1 overflow-hidden p-6 pt-0",children:(0,t.jsx)(eg,{className:"h-full",children:(0,t.jsxs)("div",{className:"space-y-4",children:[a.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:["Требуют внимания (",a.length,")"]}),(0,t.jsx)(eg,{className:"h-48",children:(0,t.jsx)("div",{className:"space-y-3 pr-4",children:a.map(e=>{var r;let n=null!=(r=eL[e.type])?r:eL.info;return(0,t.jsxs)("div",{className:"flex items-start gap-3 rounded-lg border border-slate-200 bg-muted/40 p-3 shadow-sm border-l-4 ".concat(n.accent),children:[function(e){var r,n;let l=null!=(n=null==(r=eL[e])?void 0:r.icon)?n:eT;return(0,t.jsx)(l,{className:"h-4 w-4 text-muted-foreground",strokeWidth:1.5})}(e.type),(0,t.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("h5",{className:"text-sm font-medium leading-tight",children:e.title}),(0,t.jsx)(eb.Badge,{variant:"outline",className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:n.label})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground leading-snug",children:e.message}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:function(e){let t=Math.floor((new Date().getTime()-e.getTime())/1e3),r=Math.floor(t/60),n=Math.floor(r/60);return t<60?"".concat(t,"с назад"):r<60?"".concat(r,"м назад"):n<24?"".concat(n,"ч назад"):e.toLocaleDateString()}(e.timestamp)})]}),(0,t.jsx)(h.Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-muted-foreground",onClick:()=>{var t;return t=e.id,void l(e=>new Set([...e,t]))},children:(0,t.jsx)(ek.default,{className:"h-3 w-3"})})]},e.id)})})})]}),0===a.length&&(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)(eT,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{className:"text-sm",children:"Нет активных предупреждений"})]})]})})})]})}var eA=e.i(96508);function eM(){return(0,t.jsxs)(eA.AppSidebarLayout,{title:"Мониторинг",contentClassName:"gap-6 overflow-hidden",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(p,{})}),(0,t.jsxs)("div",{className:"grid flex-1 min-h-0 gap-6 lg:grid-cols-2",children:[(0,t.jsx)(eC,{}),(0,t.jsx)(eD,{})]})]})}}]);